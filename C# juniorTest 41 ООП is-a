using System;
using System.Collections.Generic;

namespace TestOOP
{
    class Program
    {
        private static int number;

        static void Main(string[] args)
        {
            int listsPlauersPositionX = 0;
            int listsPlauersPositionY = 16;
            bool isPlay = true;

            DataBase dataBase = new DataBase();

            while (isPlay)
            {
                Console.Clear();
                Console.SetCursorPosition(listsPlauersPositionX, listsPlauersPositionY);

                dataBase.ShowPlauers();

                Console.SetCursorPosition(0, 0);
                Console.WriteLine(" Вы типо судья и еще кто-то. Ваши возможные действия: \n");
                Console.WriteLine(" 1 - добавить игрока\n\n 2 - Изменить статус бана\n\n 3 - удалить игрока\n\n 4 - закончить\n\n");
                Console.Write(" Выбор действия: ");
                string action = Console.ReadLine();

                switch (action)
                {
                    case "1":
                        dataBase.CreatePlauer();
                        break;

                    case "2":
                        dataBase.ChangeBan(GetNumber());
                        break;

                    case "3":

                        dataBase.DeletePlauer(GetNumber());
                        break;

                    case "4":
                        isPlay = false;

                        break;
                    default:
                        Console.WriteLine(" Введена хрень");
                        break;
                }
            }
        }

        static int GetNumber()
        {
            Console.Write(" Введите номер жертвы: ");
            int.TryParse(Console.ReadLine(), out number);
            return number;
        }
    }

    class DataBase
    {

        public List<Plauer> plauers = new List<Plauer>();

        public void CreatePlauer()
        {
            Console.Write(" Введите прозвище: ");
            string name = Console.ReadLine();
            plauers.Add(new Plauer(name));
        }

        public void DeletePlauer(int number)
        {
            for (int i = 0; i < plauers.Count; i++)
            {
                if (plauers[i].Index == number)
                    plauers.Remove(plauers[i]);
            }
        }

        public void ChangeBan(int number)
        {
            for (int i = 0; i < plauers.Count; i++)
            {
                if (plauers[i].Index == number)
                    plauers[i].ChangeStatusBan(plauers[i]);
            }
        }

        public void ShowPlauers()
        {
            for (int i = 0; i < plauers.Count; i++)
            {
                Console.WriteLine(plauers[i].Index + "  " + plauers[i].Nick + " L" + plauers[i].Level + " бан = " + plauers[i].StatusBan);
            }
        }
    }
    class Plauer : DataBase
    {
        public static int Ids;

        public int Index { get; private set; }
        public string Nick { get; private set; }
        public int Level { get; private set; }
        public bool StatusBan { get; private set; }


        public Plauer(string name, int level = 1, bool isBan = false)
        {
            Index = ++Ids;
            Nick = name;
            Level = level;
            StatusBan = isBan;
        }

        public void ChangeStatusBan(Plauer plauer)
        {
            plauer.StatusBan = !StatusBan;
        }
    }
}
