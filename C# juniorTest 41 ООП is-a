using System;
using System.Collections.Generic;

namespace TestOOP
{
    class Program
    {
        static void Main(string[] args)
        {
            int listsPlauersPositionX = 0;
            int listsPlauersPositionY = 16;
            bool isPlay = true;

            DataBase dataBase = new DataBase();

            while (isPlay)
            {
                Console.Clear();
                Console.SetCursorPosition(listsPlauersPositionX, listsPlauersPositionY);

                dataBase.ShowPlauers();

                Console.SetCursorPosition(0, 0);
                Console.WriteLine(" Вы типо судья и еще кто-то. Ваши возможные действия: \n");
                Console.WriteLine(" 1 - добавить игрока\n\n 2 - удалить игрока\n\n 3 - забанить\n\n 4 - разбанить\n\n 5 - закончить\n");
                Console.Write(" Выбор действия: ");
                string action = Console.ReadLine();

                switch (action)
                {
                    case "1":
                        dataBase.CreatePlauer();
                        break;

                    case "2":
                        dataBase.DeletePlauer(GetNumber());
                        break;

                    case "3":
                        dataBase.PlauerBan(GetNumber());
                        break;

                    case "4":
                        dataBase.PlauerUnBan(GetNumber());
                        break;

                    case "5":
                        isPlay = false;
                        break;

                    default:
                        Console.WriteLine(" Введена хрень");
                        break;
                }
            }
        }

        static int GetNumber()
        {
            int number;
            Console.Write(" Введите номер жертвы: ");
            int.TryParse(Console.ReadLine(), out number);
            return number;
        }
    }

    class DataBase
    {
        private int _index;

        private readonly List<Plauer> _plauers = new List<Plauer>();

        public void CreatePlauer()
        {
            Console.Write(" Введите прозвище: ");
            string name = Console.ReadLine();
            _plauers.Add(new Plauer(name));
        }

        public void DeletePlauer(int number)
        {
            if(TryGetPlayer(number, out _index))
                    _plauers.Remove(_plauers[_index]);
        }

        public void PlauerBan(int number)
        {
            if (TryGetPlayer(number, out _index))
                _plauers[_index].Ban();
        }
        public void PlauerUnBan(int number)
        {
            if (TryGetPlayer(number, out _index))
                _plauers[_index].UnBan();
        }

        public void ShowPlauers()
        {
            for (int i = 0; i < _plauers.Count; i++)
            {
                Console.WriteLine(_plauers[i].Index + "  " + _plauers[i].Nick + " L" + _plauers[i].Level + " бан = " + _plauers[i].StatusBan);
            }
        }

        private bool TryGetPlayer(int number, out int index)
        {
            bool isResult = false;
            index = 0;

            for (int i = 0; i < _plauers.Count; i++)
            {
                if (_plauers[i].Index == number)
                {
                    index = i;
                    isResult = true;
                    break;
                }
                else
                    isResult = false;
            }
            return isResult;
        }
    }
    class Plauer
    {
        private static int _ids;

        public int Index { get; private set; }
        public string Nick { get; private set; }
        public int Level { get; private set; }
        public bool StatusBan { get; private set; }


        public Plauer(string name, int level = 1, bool isBan = false)
        {
            Index = ++_ids;
            Nick = name;
            Level = level;
            StatusBan = isBan;
        }

        public void Ban()
        {
            StatusBan = true;
        }
        public void UnBan()
        {
            StatusBan = false;
        }
    }
}
