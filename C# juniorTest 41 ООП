using System;
using System.Collections.Generic;

namespace TestOOP
{
    class Program
    {
        static void Main(string[] args)
        {
            int listsPlayersPositionX = 0;
            int listsPlayersPositionY = 16;
            bool isPlay = true;
            Database database = new Database();

            while (isPlay)
            {
                Console.Clear();
                Console.SetCursorPosition(listsPlayersPositionX, listsPlayersPositionY);
                database.ShowPlayers();
                Console.SetCursorPosition(0, 0);
                Console.WriteLine(" Вы типо судья и еще кто-то. Ваши возможные действия: \n");
                Console.WriteLine(" 1 - добавить игрока\n\n 2 - удалить игрока\n\n 3 - забанить\n\n 4 - разбанить\n\n 5 - закончить\n");
                Console.Write(" Выбор действия: ");
                string action = Console.ReadLine();

                switch (action)
                {
                    case "1":
                        database.CreatePlayer();
                        break;

                    case "2":
                        database.DeletePlayer(GetNumber());
                        break;

                    case "3":
                        database.BanPlayer(GetNumber());
                        break;

                    case "4":
                        database.UnBanPlayer(GetNumber());
                        break;

                    case "5":
                        isPlay = false;
                        break;

                    default:
                        Console.WriteLine(" Введена хрень");
                        break;
                }
            }
        }
        static int GetNumber()
        {
            int number;
            Console.Write(" Введите номер жертвы: ");
            int.TryParse(Console.ReadLine(), out number);
            return number;
        }
    }

    class Database
    {
        private readonly List<Player> _players = new List<Player>();

        public void CreatePlayer()
        {
            Console.Write(" Введите прозвище: ");
            string name = Console.ReadLine();
            _players.Add(new Player(name));
        }

        public void DeletePlayer(int number)
        {
            Player player;

            if (TryGetPlayer(number, out player))
                _players.Remove(player);
        }

        public void BanPlayer(int number)
        {
            Player player;

            if (TryGetPlayer(number, out player))
                player.Ban();
        }
        public void UnBanPlayer(int number)
        {
            Player player;

            if (TryGetPlayer(number, out player))
                player.UnBan();
        }

        public void ShowPlayers()
        {
            for (int i = 0; i < _players.Count; i++)
            {
                Console.WriteLine(_players[i].Id + "  " + _players[i].Nick + " L" + _players[i].Level + " бан = " + _players[i].IsBanned);
            }
        }

        private bool TryGetPlayer(int number, out Player player)
        {
            bool isResult = false;
            player = new Player(null);

            for (int i = 0; i < _players.Count; i++)
            {
                if (_players[i].Id == number)
                {
                    player = _players[i];
                    isResult = true;
                    break;
                }
            }
            return isResult;
        }
    }

    class Player
    {
        private static int _ids;
        public int Id { get; private set; }
        public string Nick { get; private set; }
        public int Level { get; private set; }
        public bool IsBanned { get; private set; }

        public Player(string name, int level = 1, bool isBan = false)
        {
            Id = ++_ids;
            Nick = name;
            Level = level;
            IsBanned = isBan;
        }

        public void Ban()
        {
            IsBanned = true;
        }

        public void UnBan()
        {
            IsBanned = false;
        }
    }
}
